% !TEX program = xelatex

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                           %
%          LaTeX File for Doctor (Master) Thesis of ECNU                    %
%            华东师范大学博士（硕士）论文模板 ____lizb                      %
%                                                                           %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%




\documentclass[12pt,a4paper,fancyhdr,openany,oneside]{ctexbook}
 
%draft 选项可以使插入的图形只显示外框，以加快预览速度。
%\documentclass[11pt,a4paper,openany,draft]{book}

\usepackage[CJKbookmarks,
colorlinks,
            urlcolor=black,
            linkcolor=black,
            anchorcolor=black,
            citecolor=black
]{hyperref}
\usepackage{shortvrb,indentfirst,ulem,makeidx}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{indentfirst,latexsym,amsthm,colortbl,subfigure,clrscode}
\usepackage{bm}                     % 处理数学公式中的黑斜体的宏包
\usepackage{amsmath}                % AMSLaTeX宏包 用来排出更加漂亮的公式
\usepackage{amssymb}                % AMSLaTeX宏包 用来排出更加漂亮的公式
\usepackage{verbatim}

\usepackage[ruled]{algorithm2e}
\usepackage{mathrsfs}
\usepackage[subnum]{cases}
\usepackage[numbers,sort&compress]{natbib} 
\usepackage{hypernat}
\usepackage{geometry}
\usepackage{hyperref}

\usepackage{times}
\usepackage{fontspec}
\usepackage{libertine}
 
\usepackage{caption}
\usepackage{titletoc}
\usepackage{enumerate}
\usepackage{diagbox}
\usepackage{multirow}
\usepackage{longtable}
\usepackage{booktabs}
\usepackage{setspace}

\usepackage{tikz}
\usetikzlibrary{arrows.meta}
\usetikzlibrary{graphs} % <-- added the calc library

% 设置列表缩进相关
\usepackage{enumitem}
\setenumerate{itemsep=0pt,partopsep=0pt,parsep=\parskip,topsep=0pt}
\setitemize{itemsep=0pt,partopsep=0pt,parsep=\parskip,topsep=0pt}
% \setdescription{itemsep=0pt,partopsep=0pt,parsep=\parskip,topsep=0pt}


% \usepackage{lmodern}
% \usepackage{anyfontsize}
% \usepackage{url}


% \setCJKmainfont[BoldFont=STHeiti,ItalicFont=STKaiti]{STSong}
% \setCJKsansfont[BoldFont=STHeiti]{STXihei}
% \setCJKmonofont{STFangsong}


\makeindex
\pagestyle{fancy}

\renewcommand{\headrulewidth}{0.4pt}



\newcommand{\loflabel}{图}
\newcommand{\lotlabel}{表}
\captionsetup[table]{labelsep=quad}
\captionsetup[figure]{labelsep=quad}

%                    根据自己正文需要做的一些定义                 %
%==================================================================
\def\diag{{\rm diag}}
\def\rank{{\rm rank}}
\def\RR{{\cal R}}
\def\NN{{\cal N}}
\def\R{{\mathbb R}}
\def\C{{\mathbb C}}
\let\dis=\displaystyle

\def\p{\partial}
\def\f{\frac}
\def\mr{\mathrm}
\def\mb{\mathbf}
\def\mc{\mathcal}
\def\b{\begin}
\def\e{\end}

\newtheorem{thm1}{Theorem}[part]
\newtheorem{thm2}{Theorem}[section]
\newtheorem{thm3}{Theorem}[subsection]
\newtheorem{them}[thm2]{定理}
\newtheorem{theorem}[thm2]{定理}
\newtheorem{defn}[thm2]{定义}
\newtheorem{define}[thm2]{定义}
\newtheorem{ex}[thm2]{例}
\newtheorem{exs}[thm2]{例}
\newtheorem{example}[thm2]{例}
\newtheorem{prop}[thm2]{命题}
\newtheorem{lemma}[thm2]{引理}
\newtheorem{cor}[thm2]{推论}
\newtheorem{remark}[thm2]{注释}
\newtheorem{notation}[thm2]{记号}
\newtheorem{abbre}[thm2]{缩写}
% \newtheorem{algorithm}[thm2]{算法}
\newtheorem{problem}[thm2]{问题}



\newcommand{\yihao}{\fontsize{26pt}{36pt}\selectfont}           % 一号, 1.4 倍行距
\newcommand{\erhao}{\fontsize{22pt}{28pt}\selectfont}          % 二号, 1.25倍行距
\newcommand{\xiaoer}{\fontsize{18pt}{18pt}\selectfont}          % 小二, 单倍行距
\newcommand{\sanhao}{\fontsize{16pt}{24pt}\selectfont}        % 三号, 1.5倍行距
\newcommand{\xiaosan}{\fontsize{15pt}{22pt}\selectfont}        % 小三, 1.5倍行距
\newcommand{\sihao}{\fontsize{14pt}{21pt}\selectfont}            % 四号, 1.5 倍行距
\newcommand{\banxiaosi}{\fontsize{13pt}{19.5pt}\selectfont}    % 半小四, 1.5倍行距
\newcommand{\xiaosi}{\fontsize{12pt}{18pt}\selectfont}            % 小四, 1.5倍行距
\newcommand{\dawuhao}{\fontsize{11pt}{11pt}\selectfont}       % 大五号, 单倍行距
\newcommand{\wuhao}{\fontsize{10.5pt}{15.75pt}\selectfont}    % 五号, 单倍行距

%============================ 可以自定义文字块 ================================%

\newcommand{\aaa}{Example}
\newcommand{\bbb}{\aaa \aaa \aaa}
\newcommand{\ccc}{\bbb \bbb \bbb \bbb \bbb

\bbb \bbb \bbb \bbb \bbb }
\newcommand{\abc}{abcdefg1234567890}
\newcommand{\upabc}{ABCDEFGHIJK}

% diy by im0qianqian
\def\thesisTitle{这里定义标题}
\def\thesisTitleNoWrap{这里还是标题，不换行的标题，用于原创性声明}
\def\thesisETitle{
    This is English Title
}

%%% ----------------------------------------------------------------------

\CTEXsetup[beforeskip = 0pt]{chapter}
\CTEXsetup[afterskip = 20pt]{chapter}


%============================= 版芯控制 ================================%
\setlength{\oddsidemargin}{0.57cm} 
\setlength{\evensidemargin}{\oddsidemargin}
\voffset-6mm \textwidth=150mm \textheight=230mm \headwidth=150mm
%\rightmargin=35mm
%                                                                       %


%============================= 页面设置 ================================%
%-------------------- 定义页眉和页脚 使用fancyhdr 宏包 -----------------%
% 定义页眉与正文间双隔线
%my addition
\fancyhead{}

% 以下两种形式，第二种加上章节后可能 pdf 查重会重复这部分
\fancyhead[CO,CE]{\small 华东师范大学硕士专业学位论文}  % 页眉居中

% \fancyhead[LO,LE]{\small 华东师范大学硕士专业学位论文}    % 页眉居左
% \fancyhead[RO,RE]{\small\leftmark}    % 页眉居右

%\fancyfoot[RE,LO]{\thepage}
%end myaddition

\newcommand{\makeheadrule}{%
\makebox[0pt][l]{\rule[.7\baselineskip]{\headwidth}{0.4pt}}%
\rule[0.85\baselineskip]{\headwidth}{0.4pt} \vskip-.8\baselineskip}
%\lhead{}
%\chead{华东师范大学硕士论文}
%\rhead{}
%双线页眉%
%\makeatletter
%\renewcommand{\headrule}{%
%{\if@fancyplain\let\headrulewidth\plainheadrulewidth\fi
%\makeheadrule}} \makeatother
%单线页眉%
\renewcommand{\headrulewidth}{1pt} 


\newcommand{\adots}{\mathinner{\mkern 2mu%
\raisebox{0.1em}{.}\mkern 2mu\raisebox{0.4em}{.}%
\mkernmu\raisebox{0.7em}{.}\mkern 1mu}}

\setmainfont{Times New Roman}
\dottedcontents{chapter}[1.5cm]{\xiaosi\heiti}{3.8em}{9.5pt}
\dottedcontents{section}[1.5cm]{\xiaosi\heiti}{2.8em}{9.5pt}


\makeatletter
\let\ps@plain\ps@fancy
\makeatother

%=============================== 正文部分 ================================%
% !!! 使用 Overleaf 的同学注意，如果 texlive 版本是 2021+，这里可能会报错，去除所有 \include{} 即可；或选用 texlive 2019/2020（低版本去除 \include{} 暂未测试）。
\include{A1-COVER-1.tex}
\include{A2-COVER-E.tex}
\include{A3-COPYRIGHT.tex}   %注释掉部分
\include{A4-MEMBERLIST.tex}  %注释掉部分
\include{B1-ABSTRACT.tex}
\include{B2-ABSTRACT-E.tex}
\include{C1-CHAP1.tex} 
\include{C2-CHAP2.tex}
\include{C3-CHAP3.tex}
\include{C4-CHAP4.tex}
\include{C5-CHAP5.tex}
\include{C6-CHAP6.tex}
\include{C7-CHAP7.tex}
\include{D2-ACHNOWLEDGEMENT.tex}
\include{D3-MYACHIEVEMENTS.tex}

\begin{document}
\input A1-COVER-1.tex

\input A2-COVER-E.tex

\input A3-COPYRIGHT.tex  %注释掉部分

\input A4-MEMBERLIST.tex %注释掉部分

\newpage
\pagenumbering{roman}
\pagestyle{plain}
\setlength{\baselineskip}{25pt}  %% 正文及摘要设为 25 磅行间距

\input B1-ABSTRACT.tex

\input B2-ABSTRACT-E.tex

\setcounter{tocdepth}{2}    % 文章目录
\tableofcontents


\renewcommand{\numberline}[1]{\loflabel~#1\hspace*{1em}}
%设置图目录编号样式，主要是间距
\listoffigures
%自动生成图目录
\addcontentsline{toc}{chapter}{图索引}

% 表格目录
\renewcommand{\numberline}[1]{\lotlabel~#1\hspace*{1em}}
\listoftables
\addcontentsline{toc}{chapter}{表索引}


\newpage
\pagenumbering{arabic}
\pagestyle{fancy}

\CTEXsetup[format+={\zihao{3}\heiti}]{chapter}
\CTEXsetup[format+={\raggedright\zihao{4}\heiti}]{section}
\CTEXsetup[format+={\zihao{-4}\heiti}]{subsection}

% \setlength{\baselineskip}{25pt}  %%正文设为25磅行间距

\input C1-CHAP1.tex
\input C2-CHAP2.tex
\input C3-CHAP3.tex
\input C4-CHAP4.tex
\input C5-CHAP5.tex
\input C6-CHAP6.tex
\input C7-CHAP7.tex

\newpage
\addcontentsline{toc}{chapter}{参考文献}
\bibliographystyle{gbt7714-2005}
\setlength{\bibsep}{0.0ex}  % 设置每个参考文献之间的间距
\bibliography{main}

\newpage
\pagestyle{empty}

\phantomsection
\addcontentsline{toc}{chapter}{致谢}
\input D2-ACHNOWLEDGEMENT.tex

\newpage
\pagestyle{empty}
\phantomsection
\addcontentsline{toc}{chapter}{发表论文和科研情况}
\input D3-MYACHIEVEMENTS.tex

\printindex
\end{document}
